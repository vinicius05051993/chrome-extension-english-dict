<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Meu Site Simples</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
    </style>
</head>
<body>
<h1>Bem-vindo ao meu site!</h1>
<p>Este é um site simples hospedado no GitHub Pages.</p>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    // Busca word.word e phase.phase para o usuário pelo email
    window.addEventListener('DOMContentLoaded', async function () {
        const SUPABASE_URL = 'https://wgkakdbjxdqfdshqodtw.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indna2FrZGJqeGRxZmRzaHFvZHR3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjM2NjQ0NzcsImV4cCI6MjAzOTI0MDQ3N30.yAEn_IPXMxK4holhx9osY8nwHPVQIuF8bPZ7_asV0KM';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        const params = new URLSearchParams(window.location.search);
        const email = params.get('email');

        const { data, error } = await supabase.rpc('get_user_words_phases', { user_email: email });

        if (error) {
            console.error('Erro ao buscar dados:', error);
        } else {
            let html = `<table border="1" style="margin: 0 auto; border-collapse: collapse;">
            <thead>
                <tr>
                    <th>Word</th>
                    <th>Phase</th>
                </tr>
            </thead>
            <tbody>
                ${data.map(item => `
                    <tr>
                        <td>${item.word}</td>
                        <td>${item.phase ? item.phase : '<i>(vazio)</i>'}</td>
                    </tr>
                `).join('')}
            </tbody>
        </table>`;
            document.body.insertAdjacentHTML('beforeend', html);
        }
    });
</script>

</body>
</html>